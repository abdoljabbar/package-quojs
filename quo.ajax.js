/* QuoJS v3.0.0 - 2013/12/30
   http://quojs.tapquo.com
   Copyright (c) 2013 Javi Jimenez Villar (@soyjavi) - Licensed MIT */
(function(){"use strict";!function($$){var DEFAULT,JSONP_ID,MIME_TYPES,_isJsonP,_jsonp,_parseResponse,_xhrError,_xhrForm,_xhrHeaders,_xhrStatus,_xhrSuccess,_xhrTimeout;return DEFAULT={TYPE:"GET",MIME:"json"},MIME_TYPES={script:"text/javascript, application/javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},JSONP_ID=0,$$.ajaxSettings={type:DEFAULT.TYPE,async:!0,success:{},error:{},context:null,dataType:DEFAULT.MIME,headers:{},xhr:function(){return new window.XMLHttpRequest},crossDomain:!1,timeout:0},$$.ajax=function(options){var abortTimeout,error,settings,xhr;if(settings=$$.mix($$.ajaxSettings,options),settings.type===DEFAULT.TYPE?settings.url+=$$.serializeParameters(settings.data,"?"):settings.data=$$.serializeParameters(settings.data),_isJsonP(settings.url))return $$.jsonp(settings);xhr=settings.xhr(),xhr.onreadystatechange=function(){return 4===xhr.readyState?(clearTimeout(abortTimeout),_xhrStatus(xhr,settings)):void 0},xhr.open(settings.type,settings.url,settings.async),_xhrHeaders(xhr,settings),settings.timeout>0&&(abortTimeout=setTimeout(function(){return _xhrTimeout(xhr,settings)},settings.timeout));try{xhr.send(settings.data)}catch(_error){error=_error,xhr=error,_xhrError("Resource not found",xhr,settings)}return settings.async?xhr:_parseResponse(xhr,settings)},$$.get=function(url,data,success,dataType){return $$.ajax({url:url,data:data,success:success,dataType:dataType})},$$.post=function(url,data,success,dataType){return _xhrForm("POST",url,data,success,dataType)},$$.put=function(url,data,success,dataType){return _xhrForm("PUT",url,data,success,dataType)},$$["delete"]=function(url,data,success,dataType){return _xhrForm("DELETE",url,data,success,dataType)},$$.json=function(url,data,success){return $$.ajax({url:url,data:data,success:success})},$$.serialize=function(parameters,character){var parameter,serialize;null==character&&(character=""),serialize=character;for(parameter in parameters)parameters.hasOwnProperty(parameter)&&(serialize!==character&&(serialize+="&"),serialize+=""+encodeURIComponent(parameter)+"="+encodeURIComponent(parameters[parameter]));return serialize===character?"":serialize},_jsonp=function(settings){var abortTimeout,callbackName,script,xhr;return settings.async?(callbackName="jsonp"+ ++JSONP_ID,script=document.createElement("script"),xhr={abort:function(){return $$(script).remove(),callbackName in window?window[callbackName]={}:void 0}},abortTimeout=void 0,window[callbackName]=function(response){return clearTimeout(abortTimeout),$$(script).remove(),delete window[callbackName],_xhrSuccess(response,xhr,settings)},script.src=settings.url.replace(RegExp("=\\?"),"="+callbackName),$$("head").append(script),settings.timeout>0&&(abortTimeout=setTimeout(function(){return _xhrTimeout(xhr,settings)},settings.timeout)),xhr):console.error("QuoJS.ajax: Unable to make jsonp synchronous call.")},_xhrStatus=function(xhr,settings){xhr.status>=200&&xhr.status<300||0===xhr.status?settings.async&&_xhrSuccess(_parseResponse(xhr,settings),xhr,settings):_xhrError("QuoJS.ajax: Unsuccesful request",xhr,settings)},_xhrSuccess=function(response,xhr,settings){settings.success.call(settings.context,response,xhr)},_xhrError=function(type,xhr,settings){settings.error.call(settings.context,type,xhr,settings)},_xhrHeaders=function(xhr,settings){var header;settings.contentType&&(settings.headers["Content-Type"]=settings.contentType),settings.dataType&&(settings.headers.Accept=MIME_TYPES[settings.dataType]);for(header in settings.headers)xhr.setRequestHeader(header,settings.headers[header])},_xhrTimeout=function(xhr,settings){xhr.onreadystatechange={},xhr.abort(),_xhrError("QuoJS.ajax: Timeout exceeded",xhr,settings)},_xhrForm=function(method,url,data,success,dataType){return $$.ajax({type:method,url:url,data:data,success:success,dataType:dataType,contentType:"application/x-www-form-urlencoded"})},_parseResponse=function(xhr,settings){var error,response;if(response=xhr.responseText)if(settings.dataType===DEFAULT.MIME)try{response=JSON.parse(response)}catch(_error){error=_error,response=error,_xhrError("QuoJS.ajax: Parse Error",xhr,settings)}else"xml"===settings.dataType&&(response=xhr.responseXML);return response},_isJsonP=function(url){return RegExp("=\\?").test(url)}}(Quo)}).call(this);