/* QuoJS v3.0.0 - 2013/12/30
   http://quojs.tapquo.com
   Copyright (c) 2013 Javi Jimenez Villar (@soyjavi) - Licensed MIT */
(function(){"use strict";!function($$){var ELEMENT_ID,EVENTS_DESKTOP,EVENT_METHODS,HANDLERS,READY_EXPRESSION,_createProxy,_createProxyCallback,_environmentEvent,_event,_findHandlers,_getElementId,_subscribe,_unsubscribe;return ELEMENT_ID=1,HANDLERS={},EVENT_METHODS={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},EVENTS_DESKTOP={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touch:"click",orientationchange:"resize"},READY_EXPRESSION=/complete|loaded|interactive/,$$.fn.on=function(event,selector,callback){return null==selector||"function"===$$.toType(selector)?this.bind(event,selector):this.delegate(selector,event,callback)},$$.fn.off=function(event,selector,callback){return null==selector||"function"===$$.toType(selector)?this.unbind(event,selector):this.undelegate(selector,event,callback)},$$.fn.ready=function(callback){return READY_EXPRESSION.test(document.readyState)?callback.call(this,$$):$$.fn.addEvent(document,"DOMContentLoaded",function(){return callback.call(this,$$)})},$$.fn.bind=function(event,callback){return this.each(function(){return _subscribe(this,event,callback)})},$$.fn.unbind=function(event,callback){return this.each(function(){return _unsubscribe(this,event,callback)})},$$.fn.delegate=function(selector,event,callback){return this.each(function(i,element){return _subscribe(element,event,callback,selector,function(fn){return function(e){var evt,match;return match=$$(e.target).closest(selector,element).get(0),match?(evt=$$.extend(_createProxy(e),{currentTarget:match,liveFired:element}),fn.apply(match,[evt].concat([].slice.call(arguments,1)))):void 0}})})},$$.fn.undelegate=function(selector,event,callback){return this.each(function(){return _unsubscribe(this,event,callback,selector)})},$$.fn.trigger=function(event,touch,originalEvent){return"string"===$$.toType(event)&&(event=_event(event,touch)),null!=originalEvent&&(event.originalEvent=originalEvent),this.each(function(){return this.dispatchEvent(event)})},$$.fn.addEvent=function(element,event_name,callback){return element.addEventListener?element.addEventListener(event_name,callback,!1):element.attachEvent?element.attachEvent("on"+event_name,callback):element["on"+event_name]=callback},$$.fn.removeEvent=function(element,event_name,callback){return element.removeEventListener?element.removeEventListener(event_name,callback,!1):element.detachEvent?element.detachEvent("on"+event_name,callback):element["on"+event_name]=null},_event=function(type,touch){var event,property;if(event=document.createEvent("Events"),event.initEvent(type,!0,!0,null,null,null,null,null,null,null,null,null,null,null,null),touch)for(property in touch)event[property]=touch[property];return event},_subscribe=function(element,event,callback,selector,delegate_callback){var delegate,element_handlers,element_id,handler;return event=_environmentEvent(event),element_id=_getElementId(element),element_handlers=HANDLERS[element_id]||(HANDLERS[element_id]=[]),delegate=delegate_callback&&delegate_callback(callback,event),handler={event:event,callback:callback,selector:selector,proxy:_createProxyCallback(delegate,callback,element),delegate:delegate,index:element_handlers.length},element_handlers.push(handler),$$.fn.addEvent(element,handler.event,handler.proxy)},_unsubscribe=function(element,event,callback,selector){var element_id;return event=_environmentEvent(event),element_id=_getElementId(element),_findHandlers(element_id,event,callback,selector).forEach(function(handler){return delete HANDLERS[element_id][handler.index],$$.fn.removeEvent(element,handler.event,handler.proxy)})},_getElementId=function(element){return element._id||(element._id=ELEMENT_ID++)},_environmentEvent=function(event){var environment_event;return environment_event=$$.isMobile()?event:EVENTS_DESKTOP[event],environment_event||event},_createProxyCallback=function(delegate,callback,element){var proxy;return callback=delegate||callback,proxy=function(event){var result;return result=callback.apply(element,[event].concat(event.data)),result===!1&&event.preventDefault(),result}},_findHandlers=function(element_id,event,fn,selector){return(HANDLERS[element_id]||[]).filter(function(handler){return!(!handler||event&&handler.event!==event||fn&&handler.callback!==fn||selector&&handler.selector!==selector)})},_createProxy=function(event){var proxy;return proxy=$$.extend({originalEvent:event},event),$$.each(EVENT_METHODS,function(name,method){return proxy[name]=function(){return this[method]=function(){return!0},event[name].apply(event,arguments)},proxy[method]=function(){return!1}}),proxy}}(Quo)}).call(this);